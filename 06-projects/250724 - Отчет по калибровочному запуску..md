---
author: Василий Челпанов
tags:
  - разметка
  - гомография
date: 2025-07-22
---
- [[#Повторяющиеся ошибки|Повторяющиеся ошибки]]
	- [[#Повторяющиеся ошибки#Слишком большой пропуск кадров|Слишком большой пропуск кадров]]
		- [[#Слишком большой пропуск кадров#Описание|Описание]]
		- [[#Слишком большой пропуск кадров#Как исправить|Как исправить]]
	- [[#Повторяющиеся ошибки#Отсутствие разметки на линии, которая есть на кадре|Отсутствие разметки на линии, которая есть на кадре]]
		- [[#Отсутствие разметки на линии, которая есть на кадре#Описание|Описание]]
		- [[#Отсутствие разметки на линии, которая есть на кадре#Как исправить|Как исправить]]
	- [[#Повторяющиеся ошибки#Ошибка разметки верхней/нижней точки|Ошибка разметки верхней/нижней точки]]
		- [[#Ошибка разметки верхней/нижней точки#Описание|Описание]]
		- [[#Ошибка разметки верхней/нижней точки#Как исправить|Как исправить]]
	- [[#Повторяющиеся ошибки#Неверное количество точек на дугах/окружностях|Неверное количество точек на дугах/окружностях]]
		- [[#Неверное количество точек на дугах/окружностях#Описание|Описание]]
		- [[#Неверное количество точек на дугах/окружностях#Как исправить|Как исправить]]
	- [[#Повторяющиеся ошибки#Смена типа точки при необходимости|Смена типа точки при необходимости]]
		- [[#Смена типа точки при необходимости#Описание|Описание]]
		- [[#Смена типа точки при необходимости#Как исправить|Как исправить]]
- [[#Вопросы|Вопросы]]
	- [[#Вопросы#Увеличение среднего времени разметки|Увеличение среднего времени разметки]]
- [[#Дальнейшие действия|Дальнейшие действия]]

## Повторяющиеся ошибки
### Слишком большой пропуск кадров
#### Описание 
Примеры к чему приводит разметка с шагом без проверки промежуточных кадров:
1. Не проверен промежуточный шаг - все точки съехали 
	 ![[250724 - Отчет по калибровочному запуску.-1753380092875.webp|400]]
2. Не проверен промежуточный шаг - осталась точка артефакт с предыдущего кадра
	![[250724 - Отчет по калибровочному запуску.-1753375973796.webp|400]]
3. Не проверен промежуточный шаг - не проставлены точки на исходной линии
	![[250724 - Отчет по калибровочному запуску.-1753376413482.webp|200]]

Статистика по количеству кадров, на которых не редактировались ключевые точки (=остались с предыдущего кадра + интерполяция). Показано среднее количество кадров без редактирования на 10 изображений. По графику можно сделать вывод, что зачастую разметчики **не просматривают**/**не редактируют ошибки** на промежуточных кадрах, что приводит к ухудшению качества разметки.
![[250724 - Отчет по калибровочному запуску.-1753358125972.webp|400]]
Ниже показано среднее количество отредактированных ключевых точек на сто точек разметки, с разделением по типу ключевой точки и по видео. На базе данного графика можно заметить, что у нас есть явная закономерность, что один из разметчиков редактирует в среднем меньше точек, а один из разметчиков редактирует в среднем больше точек. 
![[250724 - Отчет по калибровочному запуску.-1753358540891.webp|400]]
#### Как исправить 
1. **Уменьшить шаг с 10 до 3.** 
   Задается в настройках, дополнительно будет отражено в инструкции.
2. **Поговорить с разметчиками о важности просмотра промежуточных кадров в ущерб затраченному времени.**

### Отсутствие разметки на линии, которая есть на кадре
#### Описание
Есть кадры, когда разметчики не выделяют линию, хотя она есть в поле зрения камеры. Это в свою очередь объясняется правилом из базовой инструкции по разметке.
> Если видимая разметка не позволяет задать линию по двум точкам, то ее размечать не нужно (см. Пример 5).

В данном случае необходимо выделить линию если есть такая возможность, на приведенном ниже примере линяя плохо, но видна. 

Если линия не видна и ее местоположение трудно определить на базе текущего/предыдущего/следующего кадра, то такой случай необходимо дополнительно согласовывать с постановщиком задачи.

![[250724 - Отчет по калибровочному запуску.-1753361071775.webp|400]]

#### Как исправить
1. **Добавление нового пункта в правила разметки видео.**
	Отдельно описать, что все линии, которые находятся на представленном кадре должны быть размечены. Если линия вообще не видна, ее положение не определяется ни на базе предыдущего, ни на базе следующего кадра - согласовывать с постановщиком задачи.
2.  **Обсудить с разметчиками данную ошибку**.

### Ошибка разметки верхней/нижней точки
#### Описание
В одном видео встречалась неверная интерпретация правила:
> Каждая вертикальная линия описана двумя точками, соответственно одна из них - верхняя (лежит ближе к верхней части поля), а другая - нижняя (лежит ближе к нижней части поля). Для каждой точки, описывающей вертикальную линию, необходимо отметить верхней или нижней она является (см. пример 14).

 По представленному пункту документации на одной вертикальной линии не могут быть две верхних, или две нижних точки. 

Ниже представлена **корректная** разметка, несмотря на то, что обе точки лежат в верхней половине поля.
![[250724 - Отчет по калибровочному запуску.-1753367928286.webp|400]]
#### Как исправить
1. **Обсудить с разметчиками данную ошибку**.

### Неверное количество точек на дугах/окружностях
#### Описание
В документации четко зафиксированы необходимое количество точек для разметки дуг/окружностей:
- **Дуги**
>Необходимо брать точки с разных частей видимой области разметки, при этом обязательны к выделению точки, которые лежат на левой/правой границах дуги.
> В качестве ориентира можно опираться на рисунок, который представлен ниже. Инструкция для разметки 4. Ключевые точки, которые были поставлены на этапе разметки пересечения дуги и штрафной, учитываются при подсчете (см. Пример 1). 
> Если видно менее половины дуги, **то можно выделить только 5 точек**.

- **Центральный круг**
> Ключевые точки, которые были поставлены на этапе разметки пересечения вертикальной линии и центрального круга, учитываются при подсчете (см. Пример 2). 
> Если видно менее половины, но больше четверти от центрального круга, то **можно выделить 12 точек**. Если видно менее четверти от центрального круга, то **можно выделить 8 точек**.

![[250724 - Отчет по калибровочному запуску.-1753378457717.webp|200]]

#### Как исправить
1. **Обсудить с разметчиками данную ошибку**.
### Смена типа точки при необходимости
#### Описание
Зачастую, когда в кадре видная только горизонтальная линия, а потом с перемещением ракурса становится видна и соответствующая вертикальная линия, разметчики забывают сделать точку нового класса под вертикальную линию, из-за чего возникает ошибка на этапе постобработки.
![[250724 - Отчет по калибровочному запуску.-1753375384212.webp|400]]
#### Как исправить
1. **Обсудить с разметчиками данную ошибку**.

## Вопросы

### Увеличение среднего времени разметки
Статистика потраченного времени на разметку:
>   Направляем результаты разметки. По результатам калибровки скорости, в среднем на одно видео затрачивается 5 часов 30 минут. Количество кадров выходит одинаковое 572, Движений точек в среднем за видео – 2058 (создание, скрытие, перемещение, показ). На одну точку таким образом в среднем уходит 11 секунд, на один кадр в среднем 6 минут.

Если мы ее будем пересчитывать корректно:
1. Разметчики редактируют в среднем 12% изображений от общего числа в видеопоследовательности.
2. Всего было 572 кадра, 12% от 572 ≈ 68 кадров 
3. 5 часов 30 минут = 330 минут
4. 330 / 68 = **4.85 мин/кадр**

Но на базе информации из проекта Tagme ([football_field_keypoint_v2_markup](https://tagme.sberdevices.ru/company/d1787daa-b492-4541-95f3-d0a63f288ec1/project/04e206c3-ed72-412e-93aa-eae0dfb0b75c)), где базовая инструкция полностью совпадает с текущей среднее время разметки: **4.16 мин/кадр**.

Но исходя из логики, время наоборот должно быть меньше, так как в проекте с Tagme мы выполняем разметку с нуля, а в текущем проекте мы дорабатываем разметку с предыдущего кадра. 

**Вопрос: за счет чего среднее время разметки выросло?**

## Дальнейшие действия
1. Доработка инструкции, чтобы закрыть проблемы, которые были выявлены в ходе калибровочной разметки. 
2. Подготовка 40 минут данных для разметки 
3. Согласование ресурсов на разметкупоменяли с видео на кадры